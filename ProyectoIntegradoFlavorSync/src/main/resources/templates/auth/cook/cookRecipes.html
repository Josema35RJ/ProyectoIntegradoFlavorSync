<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlavorSync - Mis Recetas</title>
<!-- CSS de Bootstrap 5 -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
F
<!-- Font Awesome para iconos -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	rel="stylesheet">
<!-- CSS personalizado -->
<link rel="stylesheet" href="/css/cookRecipes.css">
<style>
/* Global Styling */
body {
	background-color: #f4f7fa;
	font-family: 'Arial', sans-serif;
}

/* Navbar Styling */
.navbar {
	background-color: #3b4a6b;
	box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
}

.navbar-brand, .navbar-nav .nav-link {
	color: #ffffff !important;
}

/* Sidebar Styling */
.sidebar {
	background-color: #ffffff;
	border-radius: 8px;
	padding: 20px;
	box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.05);
}

.sidebar h4, .sidebar h5 {
	color: #3b4a6b;
}

.sidebar img {
	border: 2px solid #3b4a6b;
}

.sidebar ul {
	list-style-type: none;
	padding: 0;
}

.sidebar ul li {
	margin-bottom: 10px;
	color: #555;
}

/* Tab and Card Section Styling */
.tab-content {
	padding-top: 20px;
}

.card {
	border: 1px solid #e0e0e0;
	border-radius: 8px;
	box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.05);
	transition: transform 0.2s ease;
}

.card:hover {
	transform: translateY(-5px);
	box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
}

.card-img-top {
	border-top-left-radius: 8px;
	border-top-right-radius: 8px;
	height: 160px;
	object-fit: cover;
}

.card-title {
	font-size: 1.1rem;
	color: #3b4a6b;
}

.card-footer {
	background-color: #f8f9fa;
}

.star.filled {
	color: #ffc107;
}

/* Modal Styling */
.modal-content {
	border-radius: 10px;
	box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
}

/* Footer Styling */
.footer {
	background-color: #3b4a6b;
	color: #ffffff;
	padding: 10px 0;
}
/* Estilo general del modal */
.modal-content {
	background-color: #f9f9f9;
	border-radius: 10px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	padding: 20px;
	font-family: 'Arial', sans-serif;
}

/* Cabecera del modal */
.modal-header {
	border-bottom: 2px solid #ddd;
	padding-bottom: 15px;
}

.modal-title {
	font-size: 24px;
	font-weight: bold;
	color: #333;
}

/* Botón de cierre */
.btn-close {
	background: none;
	border: none;
	font-size: 1.5rem;
	color: #999;
}

.btn-close:hover {
	color: #333;
}

/* Cuerpo del modal */
.modal-body {
	padding-top: 15px;
}

/* Títulos de las secciones dentro del modal */
h4 {
	color: #444;
	font-size: 20px;
	margin-bottom: 10px;
}

/* Estilos para las etiquetas */
strong {
	color: #007bff;
}

/* Texto de las secciones */
p {
	font-size: 16px;
	color: #555;
	line-height: 1.5;
}

/* Estilos para los elementos de lista (nutricional y técnicas) */
ul {
	list-style-type: none;
	padding-left: 0;
}

ul li {
	font-size: 16px;
	color: #555;
	margin-bottom: 8px;
}

/* Estilos de los ingredientes y restricciones dietéticas */
#modalRecipeIngredients, #modalRecipeAllergens {
	font-size: 16px;
	color: #444;
	font-style: italic;
}

#modalRecipeIngredients {
	font-weight: bold;
}

/* Estilo para las estrellas de calificación */
#modalRecipeRating {
	font-size: 18px;
	color: #ffbc00;
}

/* Contenedor de las categorías y técnicas */
#modalRecipeCategory, #modalRecipeTechniques, #modalRecipeAppliance {
	font-size: 16px;
	color: #444;
	font-style: italic;
}

/* Estilo de los consejos (grades) */
#modalRecipeGrades {
	font-style: italic;
	color: #007bff;
	font-size: 16px;
	margin-top: 10px;
}

/* Estilo de la historia */
#modalRecipeHistory {
	font-size: 16px;
	color: #777;
	margin-top: 15px;
}

/* Estilo para los botones del modal */
.modal-footer {
	display: flex;
	justify-content: center;
	padding-top: 10px;
}

/* Botón de "Cerrar" */
.btn-close {
	font-size: 1rem;
	background-color: #ff5c5c;
	color: white;
	border: none;
	padding: 8px 16px;
	border-radius: 5px;
	transition: background-color 0.3s;
}

.btn-close:hover {
	background-color: #e04e4e;
}

/* Modal responsive (para dispositivos pequeños) */
@media ( max-width : 768px) {
	.modal-dialog {
		max-width: 90%;
	}
	.modal-content {
		padding: 15px;
	}
	.modal-title {
		font-size: 22px;
	}
	.btn-close {
		font-size: 1.2rem;
	}
}
</style>
</head>
<body>

	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
		<div class="container">
			<a class="navbar-brand" href="#"><i class="fas fa-utensils"></i>
				FlavorSync</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ms-auto">
					<li class="nav-item"><a href="/auth/cook/formRecipe"
						class="btn btn-success me-3"><i class="fas fa-plus"></i> Crear
							Receta</a></li>
					<li class="nav-item"><a class="nav-link"
						href="/auth/cook/cookPanel">Home</a></li>
					<li class="nav-item"><a class="nav-link"
						href="/auth/cook/cookPerfil"><i class="fas fa-user"></i> Mi
							Perfil</a></li>
					<li class="nav-item"><a class="nav-link"
						href="/auth/cook/logout"><i class="fas fa-sign-out-alt"></i>
							Cerrar Sesión</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<main class="container mt-5">
		<div class="row">
			<!-- Left Sidebar for Profile and Info -->
			<aside class="col-lg-3 sidebar">
				<div class="text-center">
					<h4>
						Bienvenido, <span th:text="${cook.nickName ?: cook.firstName}"></span>!
					</h4>
					<img th:src="${base64Image}" class="rounded-circle shadow my-3"
						style="width: 100px; height: 100px; object-fit: cover;"
						alt="Imagen de perfil">
				</div>
				<ul class="list-unstyled mt-3">
					<li><strong>Nombre completo:</strong> <span
						th:text="${cook.firstName} + ' ' + ${cook.lastName}"></span></li>
					<li><strong>Ciudad:</strong> <span th:text="${cook.city}"></span></li>
					<li><strong>País:</strong> <span th:text="${cook.country}"></span></li>
					<li><strong>Correo:</strong> <span th:text="${cook.username}"></span></li>
					<li><strong>Edad:</strong> <span
						th:text="${#dates.format(cook.birthDate, 'yyyy-MM-dd')}"></span></li>
					<li><strong>Experiencia:</strong> <span
						th:text="${cook.experience}"></span> años</li>
				</ul>

				<!-- Specialty Section -->
				<div class="cook-specialty mt-4">
					<h5>Especialidades</h5>
					<ul>
						<li th:each="specialty : ${cook.listSpecialty}"
							th:text="${specialty}"></li>
					</ul>
				</div>

				<!-- Culinary Techniques Section -->
				<div class="cook-techniques mt-4">
					<h5>Técnicas Culinarias</h5>
					<ul>
						<li th:each="technique : ${cook.listCulinaryTechniques}"
							th:text="${technique.name}"></li>
					</ul>
				</div>
			</aside>

			<!-- Main Recipe Section -->
			<section class="col-lg-9 recipe-section">
				<ul class="nav nav-tabs mb-4" id="recipeTabs" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link active" id="created-tab"
							data-bs-toggle="tab" data-bs-target="#created" type="button"
							role="tab" aria-controls="created" aria-selected="true">Recetas
							Creadas</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="favorites-tab" data-bs-toggle="tab"
							data-bs-target="#favorites" type="button" role="tab"
							aria-controls="favorites" aria-selected="false">Recetas
							Favoritas</button>
					</li>
				</ul>

				<div class="tab-content">
					<!-- Created Recipes Tab -->
					<div class="tab-pane fade show active" id="created" role="tabpanel">
						<div class="row row-cols-1 row-cols-md-2 g-4">
							<div class="col" th:each="recipe : ${cook.listRecipes}">
								<div class="card h-100 shadow-sm">
									<img th:src="${base64listImage.get(recipe.id)}"
										class="card-img-top" alt="Imagen de la receta">
									<div class="card-body">
										<h5 class="card-title" th:text="${recipe.name}"></h5>
										<p>
											<strong>Nivel:</strong> <span th:text="${recipe.level}"></span>
										</p>
										<p>
											<strong>Comensales:</strong> <span th:text="${recipe.diners}"></span>
										</p>
										<p>
											<strong>Tiempo:</strong> <span
												th:text="${recipe.preparationTime}"></span> min
										</p>
										<p>
											<strong>Categoría:</strong> <span
												th:text="${recipe.category}"></span>
										</p>
										<p>
											<strong>Calificación:</strong> <span
												th:each="i : ${#numbers.sequence(1, 5)}"
												th:class="${i <= recipe.averageRating ? 'star filled' : 'star'}">★</span>
										</p>
									</div>
									<div class="card-footer">
										<div th:else="${booleanEdit}">
											<form action="/auth/cook/formUpdateRecipe" method="POST">
												<input type="hidden" id="id" name="id"
													th:value="${recipe.id}">
												<button type="button" class="btn btn-primary">Actualizar</button>
											</form>
										</div>
										<button class="btn btn-info btn-sm" data-bs-toggle="modal"
											data-bs-target="#recipeModal"
											th:attr="data-name=${recipe.name},
            data-level=${recipe.level},
            data-diners=${recipe.diners},
            data-time=${recipe.preparationTime},
            data-category=${recipe.category},
            data-rating=${recipe.averageRating},
            data-appliance=${recipe.whereItisDone},
            data-techniques=${recipe.listRecipeTechniques},
            data-instructions=${recipe.instructions},
            data-allergens=${recipe.AllergensAndDietaryRestrictions},
            data-nutritional=${recipe.nutritionalInformation},
            data-grades=${recipe.grades},
            data-history=${recipe.History},
            data-country=${recipe.Country},
            data-city=${recipe.city},
            data-ingredients=${recipe.Ingredients}">
											Ver</button>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Favorites Recipes Tab -->
					<div class="tab-pane fade" id="favorites" role="tabpanel">
						<div class="row row-cols-1 row-cols-md-2 g-4">
							<div class="col" th:each="recipe : ${cook.listRecipesFavorites}">
								<div class="card h-100 shadow-sm">
									<img th:src="${base64listImage.get(recipe.id)}"
										class="card-img-top" alt="Imagen de la receta">
									<div class="card-body">
										<h5 class="card-title" th:text="${recipe.name}"></h5>
										<p>
											<strong>Nivel:</strong> <span th:text="${recipe.level}"></span>
										</p>
										<p>
											<strong>Comensales:</strong> <span th:text="${recipe.diners}"></span>
										</p>
										<p>
											<strong>Tiempo:</strong> <span
												th:text="${recipe.preparationTime}"></span> min
										</p>
										<p>
											<strong>Categoría:</strong> <span
												th:text="${recipe.category}"></span>
										</p>
										<p>
											<strong>Calificación:</strong> <span
												th:each="i : ${#numbers.sequence(1, 5)}"
												th:class="${i <= recipe.averageRating ? 'star filled' : 'star'}">★</span>
										</p>
									</div>
									<div class="card-footer">
										<button class="btn btn-info btn-sm" data-bs-toggle="modal"
											data-bs-target="#recipeModal"
											th:attr="data-name=${recipe.name},
            data-level=${recipe.level},
            data-diners=${recipe.diners},
            data-time=${recipe.preparationTime},
            data-category=${recipe.category},
            data-rating=${recipe.averageRating},
            data-appliance=${recipe.whereItisDone},
            data-techniques=${recipe.listRecipeTechniques},
            data-instructions=${recipe.instructions},
            data-allergens=${recipe.AllergensAndDietaryRestrictions},
            data-nutritional=${recipe.nutritionalInformation},
            data-grades=${recipe.grades},
            data-history=${recipe.History},
            data-country=${recipe.Country},
            data-city=${recipe.city},
            data-ingredients=${recipe.Ingredients}">
											Ver</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</main>

	<!-- Modal -->
	<div class="modal fade" id="recipeModal" tabindex="-1"
		aria-labelledby="recipeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="recipeModalLabel">Detalles de la
						Receta</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body" id="recipeDetails">
					<h4 id="modalRecipeName"></h4>
					<p>
						<strong>Nivel:</strong> <span id="modalRecipeLevel"></span>
					</p>
					<p>
						<strong>Comensales:</strong> <span id="modalRecipeDiners"></span>
					</p>
					<p>
						<strong>Tiempo de preparación:</strong> <span id="modalRecipeTime"></span>
						min
					</p>
					<p>
						<strong>Categoría:</strong> <span id="modalRecipeCategory"></span>
					</p>
					<p>
						<strong>Calificación:</strong> <span id="modalRecipeRating"></span>
					</p>

					<p>
						<strong>Aparatos de cocina:</strong> <span
							id="modalRecipeAppliance"></span>
					</p>
					<p>
						<strong>Técnicas Culinarias:</strong> <span
							id="modalRecipeTechniques"></span>
					</p>
					<p>
						<strong>Instrucciones:</strong> <span id="modalRecipeInstructions"></span>
					</p>
					<p>
						<strong>Restricciones dietéticas y alérgenos:</strong> <span
							id="modalRecipeAllergens"></span>
					</p>
					<p>
						<strong>Información nutricional:</strong> <span
							id="modalRecipeNutritional"></span>
					</p>
					<p>
						<strong>Consejos:</strong> <span id="modalRecipeGrades"></span>
					</p>
					<p>
						<strong>Historia:</strong> <span id="modalRecipeHistory"></span>
					</p>
					<p>
						<strong>País:</strong> <span id="modalRecipeCountry"></span>
					</p>
					<p>
						<strong>Ciudad:</strong> <span id="modalRecipeCity"></span>
					</p>
					<p>
						<strong>Ingredientes:</strong> <span id="modalRecipeIngredients"></span>
					</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<footer class="footer py-3 text-center">
		<div class="container">© 2024 FlavorSync - Todos los derechos
			reservados</div>
	</footer>
	<!-- Bootstrap and JavaScript -->
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<!-- Popper.js -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>

	<!-- Bootstrap JS -->
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		// Escuchar cuando se abre el modal
		$('#recipeModal').on('show.bs.modal', function(event) {
			var button = $(event.relatedTarget); // El botón que disparó el modal
			var recipeName = button.data('name');
			var recipeLevel = button.data('level');
			var recipeDiners = button.data('diners');
			var recipeTime = button.data('time');
			var recipeCategory = button.data('category');
			var recipeRating = button.data('rating');
			var recipeAppliance = button.data('appliance');
			var recipeTechniques = button.data('techniques');
			var recipeInstructions = button.data('instructions');
			var recipeAllergens = button.data('allergens');
			var recipeNutritional = button.data('nutritional'); // Asegúrate de que este sea un objeto bien formateado
			var recipeGrades = button.data('grades');
			var recipeHistory = button.data('history');
			var recipeCountry = button.data('country');
			var recipeCity = button.data('city');
			var recipeIngredients = button.data('ingredients');

			var modal = $(this);
			modal.find('#modalRecipeName').text(recipeName);
			modal.find('#modalRecipeLevel').text(recipeLevel);
			modal.find('#modalRecipeDiners').text(recipeDiners);
			modal.find('#modalRecipeTime').text(recipeTime);
			modal.find('#modalRecipeCategory').text(recipeCategory);

			// Calificación
			var ratingHtml = '';
			for (var i = 1; i <= 5; i++) {
				if (i <= recipeRating) {
					ratingHtml += '★';
				} else {
					ratingHtml += '☆';
				}
			}
			modal.find('#modalRecipeRating').html(ratingHtml);

			// Mostrar los demás detalles
			modal.find('#modalRecipeAppliance').text(recipeAppliance);
			modal.find('#modalRecipeTechniques').text(recipeTechniques);
			modal.find('#modalRecipeInstructions').text(recipeInstructions);
			modal.find('#modalRecipeAllergens').text(recipeAllergens);
			modal.find('#modalRecipeNutritional').text(recipeNutritional); // Aquí puedes formatear mejor la información nutricional
			modal.find('#modalRecipeGrades').text(recipeGrades);
			modal.find('#modalRecipeHistory').text(recipeHistory);
			modal.find('#modalRecipeCountry').text(recipeCountry);
			modal.find('#modalRecipeCity').text(recipeCity);
			modal.find('#modalRecipeIngredients').text(recipeIngredients);
		});
	</script>
</body>
</html>
